# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v3

      # Runs a single command using the runners shell
      - name: show wget help info
        run: wget --help
      - name: show wget version info
        run: wget --version
      # Runs a set of commands using the runners shell
      - name: download inswapper_128.onnx
        run: |
#           echo $(pwd)
          pwd
          wget -q https://huggingface.co/MonsterMMORPG/SECourses/resolve/main/inswapper_128.onnx
#           echo .
#           ls -al
      - name: git download add commit inswapper_128.onnx
        run: |
#          wget -q https://huggingface.co/MonsterMMORPG/SECourses/resolve/main/inswapper_128.onnx
          git config --global user.email "turbo211@163.com"
          git config --global user.name "turbo211"
          git config --local user.email "turbo211@163.com"
          git config --local user.name "turbo211"
          git config credential.username UserB
          git remote rm origin
          git remote add origin  https://${{secrets.ACTION_TOKEN}}@github.com/turbo211/net-loader.git
          # git remote set-url origin https://github.com/turbo211/net-loader.git
          git branch -c ai-onnx
          git add -A
          git commit -m "auto inswapper_128.onnx"
          # git push -f origin ai-onnx
          # git push -f
          # --set-upstream
          # git push -u origin ai-onnx -f
          # ls -al
          git status
          
        - name: Git Commit Push Action
          # You may pin to the exact commit or the version.
          # uses: GuillaumeFalourd/git-commit-push@205c043bca2f932f7a48a28a8d619ba30eb84baf
          uses: GuillaumeFalourd/git-commit-push@v1.3
          with:
            # Committer's email address
            # email: # default is ${{ github.actor }}@users.noreply.github.com
            email: turbo211@163.com
            # Committer's username
            # name: # default is ${{ github.actor }}
            name: turbo211
            # Commit message
            # commit_message: # default is Commit performed using Push and Commit action
            commit_message: auto commit
            # Branch to push the changes back to
            # target_branch: # default is ${{ github.ref }}
            target_branch: ai-onnx
            # Files to add separated by space
            # files: # default is .
            # Repository url to push the code to
            # remote_repository: # default is origin
            # Token used to push the code
            # access_token: # default is ${{ github.token }}
            access_token: ${{ACTION_TOKEN}}
            # Whether to perform force push
            # force: # default is 0
            force: true
            # Whether to allow empty commit
            # empty: # optional, default is 0
            # Whether to use --tags
            # tags: # optional, default is 0
          
      
#       - name: Git Commit/Push Changes
#         # You may pin to the exact commit or the version.
#         # uses: actions-x/commit@803b20e5b72c0425eb7919c42c321e67c5bc5d2d
#         uses: actions-x/commit@v6
#         with:
#           # The committer's email address
#           # email: # default is ${{ github.actor }}@localhost
#           email: turbo211@163.com
#           # The committer's name
#           # name: # default is ${{ github.actor }}
#           name: turbo211
#           # The commit message
#           # message: # default is Automatically updated using GitHub Actions
#           message: "auto commit"
#           # The branch to push the changes back to, defaults to the current branch
#           # branch: # default is ${{ github.ref }}
#           branch: main
#           # The files to add separated by space, defaults to every file
#           # files: # default is .
#           # The repository to push the code to, defaults to origin (e.g. this repository)
#           # repository: # default is origin
#           repository: origin
#           # The token used to push the code, not needed if you push to the same repository
#           # token: # default is ${{ github.token }}
#           # token: ${{secrets.ACTION_TOKEN}}
#           # Whether to perform force push
#           # force: # default is 0
#           # The working directory that will be used for git commands
#           # directory: # default is .

          
#       - name: Just Git Push
#         # You may pin to the exact commit or the version.
#         # uses: zakiego/just-git-push@bd8adc135244d713200dd36b27ada4144989dcbd
#         uses: zakiego/just-git-push@v0.1.0
#         with:
#           # The email address of the Git user
#           email: turbo211@163.com
#           # The username of the Git user
#           username: turbo211
#           # The commit message to use
#           commit-message: "auto download"
#           # The GitHub access token for the repository
#           github-token: ${{secrets.ACTION_TOKEN}}
#           # The name of the repository to push changes to
#           repository: https://github.com/turbo211/net-loader.git
#           # The name of the branch to push changes to
#           branch: main
          
#       - name: Git Push Action
#         # You may pin to the exact commit or the version.
#         # uses: x-actions/git-push@ba04e59cd92b579c1df53fa8d398bec56f310906
#         uses: x-actions/git-push@v1.0
#         with:
#           # git user email
#           # optional, default is xiexianbin
#           GITHUB_EMAIL: "coder211@163.com"
#           # git use username
#           # optional, default is me@xiexianbin.cn
#           GITHUB_USERNAME: Artin
#           # https:/<token>@github.com/owner/repo.git
#           # PUBLISH_REPO: # optional
#           # git branch # optional
#           PUBLISH_BRANCH: ai-onnx-files
#           # dir to publish
#           # PUBLISH_DIR: # optional
